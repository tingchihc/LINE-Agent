from semantic_kernel.functions import kernel_function

class StrategiesPlugin:
    def __init__(self):
        self.location_key_words = ["地圖打不開", "找不到我在哪", "沒看到地點", 
                                   "怎麼都不會動", "系統好像卡住了", "定位",
                                   "目前位置", "GPS", "允許位置權限", "顯示位置",
                                   "位置權限", "裝置定位", "瀏覽器設定", "允許位置存取",
                                   "重新定位", "藍點", "地圖標記", "刷新畫面"]

    @kernel_function(description="提供一些針對使用者問題的可能解決方案")
    def get_strategies(self, topic: str="general") -> str:
        for l in self.location_key_words:
            if l in topic:
                return (
                    "您好～先不用擔心，我在這邊會一步一步協助您處理。很多人第一次使用這個功能時會有點不確定，這是非常正常的。您說的『找不到位置』，可能是定位功能還沒啟動或畫面還沒正確顯示，我們一起來確認看看好嗎？"
                    "別擔心，我來幫您一步步確認。您剛剛說『找不到自己在哪裡』，這通常和定位有關。我們先一起看看是不是位置權限未開啟，或者裝置還沒抓到您的目前位置～這邊我會一步一步協助您處理。"
                    "請您檢查看看手機是否允許本網站或 APP 存取您的位置？若是 iPhone，可以到『設定 → Safari → 位置』查看是否已設定為『允許』。"
                    "您可以試著到手機或電腦的設定中查看位置權限是否已開啟，或是在使用地圖的時候選擇『允許定位』。"
                    "請您嘗試按下『重新定位』或重新整理頁面。您有看到畫面上出現藍點或小圓點嗎？那就是代表您的位置。"
                    "畫面是否有出現代表您目前位置的藍色圓點？如果還沒出現，我們可以再確認一次網路與定位功能是否正常開啟。"
                    "看起來定位功能恢復正常了～您操作得非常好！未來若有任何操作上的問題，也隨時歡迎來詢問，我們很樂意幫您處理。"
                    "太好了！定位功能現在應該恢復正常了～之後若有任何問題，都可以隨時找我們，我們會隨時在這邊幫助您。"
                )
            else:
                return "這是一個常見問題，我建議您可以嘗試重新啟動系統、檢查網路、或查看是否有版本更新。如仍有問題，請隨時與我們聯繫。"